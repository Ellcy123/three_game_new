# 《三兄弟的冒险2》游戏策划文档（开发版 v2.0）

## 二、第一幕 - 第一关：密室

### 2.1 关卡概述

**关卡名称：** 密室

**关卡目标：** 救出两名被困的同伴，收集四个字母（C、E、H、O），输入密码ECHO开门

**关卡类型：** 线性解谜关卡

**预计时长：** 20-30分钟

**关卡特性：**
- ✅ 线性流程：必须按顺序完成（救猫→救狗→收集字母→开门）
- ✅ 无惩罚试错：玩家可以无限尝试道具组合
- ✅ 生命值保护：玩家生命值最低锁定为1点，不会真正死亡

### 2.2 场景初始化

#### 2.2.1 开场剧情文本

**【系统叙事】**

你们醒来后发现被困在一个密室当中。

<玩家3自定义名>环顾四周，发现这是一个布局奇怪的房间。

有一汪水潭，一个行李箱，一个衣柜。

<玩家3自定义名>好像听到了有人在哭泣...

#### 2.2.2 初始角色状态

**重要说明：**
- 小房间初始状态为关闭/隐藏，需要触发"衣柜+龟"才能发现
- 角色2（狗）虽然被困，但玩家不知道具体位置，需要探索发现

| 角色 | 显示名 | 状态 | 位置 | 可行动 | 生命值 |
|------|--------|------|------|--------|--------|
| 角色1（猫） | 玩家1自定义名 | 被困-行李箱 | 行李箱内部 | ❌ 否 | 8 |
| 角色2（狗） | 玩家2自定义名 | 被困-囚笼 | 小房间内的囚笼 | ❌ 否 | 8 |
| 角色3（龟） | 玩家3自定义名 | 自由 | 密室主区域 | ✅ 是 | 8 |

#### 2.2.3 初始可见道具

**主区域可见道具：**
```
├─ 水潭（可交互）
├─ 行李箱（可交互，内有角色1）
└─ 衣柜（可交互，后面隐藏小房间）
```

**隐藏区域（需解锁）：**
```
└─ 小房间（需触发"衣柜+龟"）
    ├─ 囚笼（内有角色2）
    ├─ 花瓶（可交互）
    ├─ 电脑（可交互）
    └─ 大门（需输入四位密码ECHO）
```

### 2.3 线性通关流程

#### 2.3.1 流程总览

**阶段1：解救猫**
- 步骤1：龟+行李箱 → 触发密码输入界面
- 步骤2：玩家输入000 → 行李箱解锁
- 步骤3：猫恢复行动能力

**阶段2：获得钥匙**
- 步骤4：猫+行李箱 → 撕烂行李箱，获得钥匙

**阶段3：发现小房间**
- 步骤5：龟+衣柜 → 发现衣柜下方按钮
- 步骤6：按下按钮 → 小房间开启
- 步骤7：发现囚笼（内有狗）、花瓶、电脑、大门

**阶段4：解救狗**
- 步骤8：龟+水潭 → 潜入水中，获得木盒
- 步骤9：狗+木盒 → 狗咬开木盒，获得字条"E"
- 步骤10：钥匙+囚笼 → 打开囚笼，狗恢复行动能力

**阶段5：收集字母**
- 步骤11：猫+衣柜 → 发现字母"C"
- 步骤12：狗+水潭 → 捞起显示器
- 步骤13：显示器+电脑 → 更换显示器，开机，获得字母"H"
- 步骤14：猫+花瓶 → 观察到瓶内字母"O"

**阶段6：开门逃脱**
- 步骤15：大门密码输入 → 输入"ECHO"
- 步骤16：大门打开 → 关卡通关

### 2.4 关键节点详细说明

#### 2.4.1 节点1：行李箱密码机制

**触发条件：** 玩家输入"行李箱+龟"或"龟+行李箱"

**系统响应流程：**

```
步骤1：玩家输入关键词
    ↓
步骤2：系统判定为"行李箱+龟"组合
    ↓
步骤3：显示剧情文本
    "<玩家3自定义名>走到行李箱前，发现上面有一个三位数密码锁。
     从行李箱内传来微弱的呼救声..."
    ↓
步骤4：弹出密码输入界面
    ├─ UI元素：密码输入框（3位数字）
    ├─ UI元素：确认按钮
    └─ UI元素：取消按钮
    ↓
步骤5A：玩家点击"取消"或关闭界面
    → 密码输入界面关闭
    → 在主界面固定位置显示"行李箱密码"按钮
    → 玩家可随时点击该按钮重新打开密码输入界面
    ↓
步骤5B：玩家输入密码并点击"确认"
    ↓
步骤6：系统判定密码
    ├─ 正确（000）→ 跳转至节点1.1
    └─ 错误 → 跳转至节点1.2
```

**节点1.1：密码正确**

系统响应：
- 显示文本："咔嚓！行李箱打开了。"
- 显示文本："<玩家1自定义名>从行李箱里爬了出来，大口呼吸着新鲜空气。"
- 角色1状态更新：被困-行李箱 → 自由
- 角色1可行动状态：否 → 是
- 移除"行李箱密码"按钮
- 解锁新关键词："猫+行李箱"

**节点1.2：密码错误**

系统响应：
- 显示文本："密码错误，行李箱依然紧闭。"
- 播放错误音效
- 密码输入界面保持打开（允许重新输入）

**设计说明：**
- "行李箱密码"按钮应放置在主界面易于访问的位置（建议右下角或顶部工具栏）
- 所有玩家均可点击该按钮尝试输入密码
- 密码输入界面应支持数字键盘快捷输入
- 不限制尝试次数

#### 2.4.2 节点2：获得钥匙

**前置条件：** 角色1（猫）已被救出，状态为"自由"

**触发条件：** 玩家输入"猫+行李箱"或任何包含"角色1"和"行李箱"的组合

**系统响应：**

```
步骤1：检查前置条件
    IF 角色1状态 != "自由" THEN
        显示："<玩家1自定义名>还被困在行李箱里，无法行动。"
        RETURN

步骤2：触发事件
    显示文本："<玩家1自定义名>怒火中烧，用爪子疯狂撕烂了行李箱。
              行李箱的内衬里掉出了一把钥匙。"

步骤3：道具状态更新
    ├─ 行李箱状态：完好 → 损坏
    ├─ 获得道具：钥匙
    └─ 解锁新关键词："钥匙+任意道具"

步骤4：标记事件
    ├─ "猫+行李箱"事件 → 已触发
    └─ 再次输入该组合时提示："行李箱已经被撕烂了。"
```

**重要说明：**
- 钥匙是救出角色2（狗）的必备道具
- 行李箱损坏后，与行李箱相关的其他组合效果会相应改变

#### 2.4.3 节点3：发现小房间

**前置条件：** 无（可在任意时刻触发）

**触发条件：** 玩家输入"衣柜+龟"或任何包含"角色3"和"衣柜"的组合

**系统响应：**

```
步骤1：触发事件
    显示文本："<玩家3自定义名>在衣柜下方发现了一个隐藏的按钮。"
    显示选项：[按下按钮] [不按]

步骤2A：玩家选择"按下按钮"
    ├─ 播放音效：机关启动声
    ├─ 显示文本："衣柜缓缓移开，后面居然有一个小房间！"
    ├─ 场景更新：小房间区域解锁
    └─ 显示小房间内容

步骤2B：玩家选择"不按"
    ├─ 显示文本："你决定先不按这个按钮。"
    └─ 保留选择机会（可重新触发"衣柜+龟"）
```

**小房间内容描述：**

**【系统叙事】**

小房间里有一个巨大的囚笼，<玩家2自定义名>被困在其中！

房间内还有一个花瓶和一台电脑。

墙上有一扇只能用四位密码触发打开的大门。

**场景状态更新：**

新增可见道具：
- 囚笼（可交互，内有角色2）
- 花瓶（可交互）
- 电脑（可交互）
- 大门（可交互，需输入四位密码）

解锁新关键词组合：
- 钥匙+囚笼
- 任意角色+囚笼
- 任意道具+花瓶
- 任意道具+电脑
- 大门密码输入

#### 2.4.4 节点4：获得木盒与字条E

**前置条件：** 无（可在任意时刻触发）

**触发条件1：** 玩家输入"水潭+龟"或任何包含"角色3"和"水潭"的组合

**系统响应1：**

显示文本："<玩家3自定义名>潜入水中，在水底发现了一个木盒。水下似乎还有其他物品，但无法拿取。"

道具状态更新：
- 获得道具：木盒
- 解锁新关键词："木盒+任意道具"

事件标记：
- "水潭+龟"事件 → 已触发（可重复，但不会再获得木盒）

**触发条件2：** 玩家输入"木盒+狗"或任何包含"角色2"和"木盒"的组合

**前置条件检查：**
```
IF 玩家未获得木盒 THEN
    显示："你还没有获得木盒。"
    RETURN

IF 角色2状态 != "自由" THEN
    显示："<玩家2自定义名>被困在囚笼里，无法帮忙。"
    RETURN
```

**系统响应2：**

显示文本："<玩家2自定义名>用牙齿咬开了木盒。木盒里有一张字条，上面写着字母：E"

道具状态更新：
- 木盒状态：完好 → 已打开
- 获得字母：E
- 字母收集进度：1/4

事件标记：
- "木盒+狗"事件 → 已触发

**设计说明：**
- 木盒可以在小房间开启前获得（水潭在主区域）
- 但打开木盒必须在救出狗之后
- 字母E是四个字母之一，需收集完整才能开门

#### 2.4.5 节点5：解救狗

**前置条件：**
- 小房间已开启（触发过"衣柜+龟"）
- 已获得钥匙（触发过"猫+行李箱"）

**触发条件：** 玩家输入"钥匙+囚笼"或任何包含"钥匙"和"囚笼"的组合

**前置条件检查：**
```
IF 小房间未开启 THEN
    显示："你还没有发现小房间。"
    RETURN

IF 钥匙未获得 THEN
    显示："你需要一把钥匙才能打开囚笼。"
    RETURN

IF 角色2状态 == "自由" THEN
    显示："<玩家2自定义名>已经被救出了。"
    RETURN
```

**系统响应：**

步骤1：触发事件
- 显示文本："<玩家?自定义名>用钥匙打开了囚笼的锁。"
- 显示文本："<玩家2自定义名>冲了出来，自由了！"

步骤2：角色状态更新
- 角色2状态：被困-囚笼 → 自由
- 角色2可行动状态：否 → 是
- 解锁角色2的所有关键词组合

步骤3：事件标记
- "钥匙+囚笼"事件 → 已触发
- 再次输入时提示："囚笼已经打开了。"

**重要说明：**
- 这是线性流程的关键节点
- 必须先救出猫（获得钥匙）才能救出狗
- 救出狗之后才能触发"木盒+狗"获得字母E

#### 2.4.6 节点6：收集字母C

**前置条件：** 角色1（猫）已被救出，状态为"自由"

**触发条件：** 玩家输入"猫+衣柜"或任何包含"角色1"和"衣柜"的组合

**系统响应：**

步骤1：前置条件检查
```
IF 角色1状态 != "自由" THEN
    显示："<玩家1自定义名>还被困着，无法探索衣柜。"
    RETURN
```

步骤2：触发事件
- 显示文本："<玩家1自定义名>在衣柜上面发现了一个模模糊糊的字母：C"

步骤3：道具状态更新
- 获得字母：C
- 字母收集进度：+1
- 显示当前进度："已收集字母：X/4"

步骤4：事件标记
- "猫+衣柜"事件 → 已触发

#### 2.4.7 节点7：收集字母H

**前置条件：**
- 角色2（狗）已被救出，状态为"自由"
- 小房间已开启（可以看到电脑）

**触发条件1：** 玩家输入"狗+水潭"或任何包含"角色2"和"水潭"的组合

**系统响应1：**

显示文本："<玩家2自定义名>从水潭里捞起了一个显示器。这显示器防水性能不错，体感还挺凑凑的。"

道具状态更新：
- 获得道具：显示器
- 解锁新关键词："显示器+任意道具"

**触发条件2：** 玩家输入"显示器+电脑"或任何包含"显示器"和"电脑"的组合

**前置条件检查：**
```
IF 显示器未获得 THEN
    显示："你还没有获得显示器。"
    RETURN

IF 小房间未开启 THEN
    显示："你还没有发现电脑。"
    RETURN
```

**系统响应2：**

步骤1：触发事件
- 显示文本："你们合力将显示器连接到电脑上。"
- 显示文本："电脑成功开机了！屏幕上显示着一个字母：H"

步骤2：道具状态更新
- 电脑状态：损坏 → 正常运行
- 获得字母：H
- 字母收集进度：+1

步骤3：事件标记
- "显示器+电脑"事件 → 已触发

#### 2.4.8 节点8：收集字母O

**前置条件：**
- 角色1（猫）已被救出，状态为"自由"
- 小房间已开启（可以看到花瓶）

**触发条件：** 玩家输入"猫+花瓶"或任何包含"角色1"和"花瓶"的组合

**系统响应：**

步骤1：前置条件检查
```
IF 角色1状态 != "自由" THEN
    显示："<玩家1自定义名>还被困着，无法探索花瓶。"
    RETURN

IF 小房间未开启 THEN
    显示："你还没有发现花瓶。"
    RETURN
```

步骤2：触发事件
- 显示文本："<玩家1自定义名>把脑袋探进了花瓶当中。观察到瓶内居然有一个字母：O"

步骤3：道具状态更新
- 获得字母：O
- 字母收集进度：+1
- 显示当前进度："已收集字母：X/4"

步骤4：事件标记
- "猫+花瓶"事件 → 已触发

#### 2.4.9 节点9：输入密码ECHO开门

**前置条件：**
- 小房间已开启（可以看到大门）
- 已收集全部四个字母：C、E、H、O

**触发方式：** 玩家点击大门或输入"大门"相关关键词

**系统响应流程：**

```
步骤1：玩家触发大门交互
    ↓
步骤2：系统检查字母收集进度
    IF 字母收集 < 4 THEN
        显示："大门需要输入四位密码，但你们还没有找到足够的线索。"
        显示当前进度："已收集字母：X/4"
        RETURN
    ↓
步骤3：弹出密码输入界面
    ├─ UI元素：密码输入框（4位字母）
    ├─ UI元素：已收集字母提示："可用字母：C、E、H、O"
    ├─ UI元素：确认按钮
    └─ UI元素：取消按钮
    ↓
步骤4：玩家输入密码
    ↓
步骤5：系统判定密码
    ├─ 正确（ECHO，不区分大小写）→ 跳转至节点9.1
    └─ 错误 → 跳转至节点9.2
```

**节点9.1：密码正确，通关**

```
步骤1：播放开门音效
    ↓
步骤2：显示通关文本
    "轰隆隆...大门缓缓打开了！"
    "你们凭借智慧打开了密室大门，完成了第一关！"
    ↓
步骤3：关卡状态更新
    ├─ 第一关状态：进行中 → 已完成
    ├─ 保存玩家生命值
    └─ 解锁第二关：藏匿
    ↓
步骤4：过场动画/文本
    "正当你们准备逃离时..."
    → 自动进入第二关
```

**节点9.2：密码错误**

系统响应：
- 显示文本："密码错误，大门依然紧闭。"
- 播放错误音效
- 提示："提示：密码可能与你们找到的字母有关。"
- 密码输入界面保持打开（允许重新输入）

**设计说明：**
- 密码输入不区分大小写（ECHO = echo = Echo）
- 不限制尝试次数
- 建议在输入界面显示已收集的字母，帮助玩家推理
- 密码"ECHO"寓意：回响（呼应游戏主题"死后世界的回响"）

### 2.5 完整道具组合表

以下是密室关卡中所有可能的道具组合及其效果。标注为【关键】的组合是通关必须触发的。

#### 2.5.1 水潭相关组合

| 组合 | 前置条件 | 效果 | 生命值变化 | 是否关键 | 一次性 |
|------|----------|------|------------|----------|---------|
| 水潭+龟 | 无 | 潜入水中获得木盒，水下另有物品但无法拿取 | 0 | 【关键】 | 否 |
| 水潭+猫 | 猫已救出 | 跳入水中（不会游泳），因"要面子"未呼救 | -1 | 否 | 是 |
| 水潭+狗 | 狗已救出 | 从水潭捞起显示器，体感"凑凑的" | 0 | 【关键】 | 是 |
| 水潭+行李箱 | 行李箱完好 | 将行李箱做成"梅利号"船，船沉后取回行李箱 | 0 | 否 | 是 |
| 水潭+衣柜 | 无 | 搬衣柜时碰头，意识到世界有引力 | -1 | 否 | 是 |
| 水潭+显示器 | 已获得显示器 | 显示器被扔回水潭后消失 | 0 | 否 | 是 |
| 水潭+电脑 | 小房间已开启 | 电脑入水后出现河神，如实回答可生命值+1 | +1 | 否 | 是 |
| 水潭+钥匙 | 已获得钥匙 | 用钥匙打水漂，被其他玩家背后吐槽"智力不健全" | 0 | 否 | 是 |
| 水潭+囚笼 | 小房间已开启，狗在囚笼 | 试图浸囚笼，被狗咬伤 | -2 | 否 | 否 |
| 水潭+囚笼 | 小房间已开启，狗已救出 | 囚笼入水后出现河神，被打耳光 | -1 | 否 | 是 |
| 水潭+花瓶 | 小房间已开启 | 饮用花瓶内带细菌的水，得肠胃炎 | -1 | 否 | 是 |
| 水潭+木盒 | 已获得木盒 | 木盒被扔回水潭后消失 | 0 | 否 | 是 |

#### 2.5.2 行李箱相关组合

| 组合 | 前置条件 | 效果 | 生命值变化 | 是否关键 | 一次性 |
|------|----------|------|------------|----------|---------|
| 行李箱+龟 | 猫未救出 | 触发密码输入界面，正确密码000，救出猫 | 0 | 【关键】 | 是 |
| 行李箱+猫 | 猫已救出 | 撕烂行李箱，获得内钥匙 | 0 | 【关键】 | 是 |
| 行李箱+狗 | 狗已救出 | 标记行李箱，效果未知 | 0 | 否 | 否 |
| 行李箱+显示器 | 已获得显示器 | 组合被吐槽"智商异于常人"，建议停手 | 0 | 否 | 是 |
| 行李箱+电脑 | 小房间已开启 | 被吐槽"打算出差"，建议就医检查 | 0 | 否 | 是 |
| 行李箱+钥匙 | 已获得钥匙 | 钥匙放回行李箱后消失（再触发时提醒） | 0 | 否 | 是 |
| 行李箱+囚笼 | 小房间已开启，狗在囚笼 | 用行李箱砸囚笼救狗，不慎砸伤狗 | 狗-1 | 否 | 是 |
| 行李箱+囚笼 | 小房间已开启，狗已救出 | 将行李箱锁入囚笼，认为"更安全" | 0 | 否 | 是 |
| 行李箱+衣柜 | 无 | 将行李箱放入衣柜，打扫后发现并非自己的房间 | 0 | 否 | 是 |
| 行李箱+花瓶 | 小房间已开启 | 将花瓶误认作青花瓷装入，被指出仅值20元 | 0 | 否 | 是 |
| 行李箱+木盒 | 已获得木盒 | 因同情木盒"不自由"，将其锁进行李箱 | 0 | 否 | 是 |

#### 2.5.3 衣柜相关组合

| 组合 | 前置条件 | 效果 | 生命值变化 | 是否关键 | 一次性 |
|------|----------|------|------------|----------|---------|
| 衣柜+龟 | 无 | 发现按钮，按下后打开小房间 | 0 | 【关键】 | 是 |
| 衣柜+猫 | 猫已救出 | 在衣柜上面发现字母C | 0 | 【关键】 | 是 |
| 衣柜+狗 | 狗已救出 | 标记衣柜，效果未知 | 0 | 否 | 否 |
| 衣柜+行李箱 | 无 | 将行李箱放入衣柜，打扫后发现并非自己的房间 | 0 | 否 | 是 |
| 衣柜+水潭 | 无 | 搬衣柜时碰头，意识到世界有引力 | -1 | 否 | 是 |
| 衣柜+显示器 | 已获得显示器 | 获得提醒"行李箱+显示器" | 0 | 否 | 是 |
| 衣柜+电脑 | 小房间已开启 | 将电脑放入衣柜开机，无效果，被其他玩家嘲笑 | 0 | 否 | 是 |
| 衣柜+钥匙 | 已获得钥匙 | 打开衣柜暗格，获得红水晶心，食用后生命值+1 | +1 | 否 | 可复用 |
| 衣柜+囚笼 | 小房间已开启，狗在囚笼 | 将囚笼锁入衣柜，被狗咬伤 | -2 | 否 | 是 |
| 衣柜+囚笼 | 小房间已开启，狗已救出 | 给囚笼内的狗穿衣服（不合身），被其他玩家疏远 | 0 | 否 | 是 |
| 衣柜+花瓶 | 小房间已开启 | 给花瓶穿衣服（不合身），被其他玩家疏远 | 0 | 否 | 是 |
| 衣柜+木盒 | 已获得木盒 | 将木盒放入衣柜，讲冷笑话导致其他玩家冻感冒 | 全体-0.5 | 否 | 是 |

#### 2.5.4 木盒相关组合

| 组合 | 前置条件 | 效果 | 生命值变化 | 是否关键 | 一次性 |
|------|----------|------|------------|----------|---------|
| 木盒+龟 | 已获得木盒 | 无法打开木盒 | 0 | 否 | 否 |
| 木盒+猫 | 已获得木盒，猫已救出 | 无法打开木盒 | 0 | 否 | 否 |
| 木盒+狗 | 已获得木盒，狗已救出 | 咬开木盒，获得字条"E" | 0 | 【关键】 | 是 |
| 木盒+水潭 | 已获得木盒 | 木盒被扔回水潭后消失 | 0 | 否 | 是 |
| 木盒+行李箱 | 已获得木盒 | 被锁进行李箱 | 0 | 否 | 是 |
| 木盒+衣柜 | 已获得木盒 | 被放入衣柜，触发冷笑话导致其他玩家生命值-0.5 | 全体-0.5 | 否 | 是 |
| 木盒+显示器 | 已获得木盒和显示器 | 木盒砸坏显示器（显示器无法使用，密码需"瞎猜"） | 0 | 否 | 是 |
| 木盒+电脑 | 已获得木盒，小房间已开启 | 无效果 | 0 | 否 | 否 |
| 木盒+钥匙 | 已获得木盒和钥匙 | 钥匙型号不匹配，无法打开木盒 | 0 | 否 | 否 |
| 木盒+囚笼 | 已获得木盒，狗在囚笼 | 将木盒给狗，狗咬开后获得字条"E" | 0 | 【关键】 | 是 |
| 木盒+囚笼 | 已获得木盒，狗已救出 | 将木盒关入囚笼，被其他玩家吐槽 | 0 | 否 | 是 |
| 木盒+花瓶 | 已获得木盒，小房间已开启 | 花瓶砸木盒后碎裂，获得字母"O" | 0 | 【关键】 | 是 |

**重要说明：**
- 木盒+狗 和 木盒+囚笼（狗在囚笼）效果相同，均可获得字母E
- 木盒+花瓶 也可获得字母O，与 猫+花瓶 是两种不同的获取方式

#### 2.5.5 电脑相关组合

| 组合 | 前置条件 | 效果 | 生命值变化 | 是否关键 | 一次性 |
|------|----------|------|------------|----------|---------|
| 电脑+猫 | 小房间已开启，猫已救出 | 发现电脑损坏，无法维修 | 0 | 否 | 是 |
| 电脑+龟 | 小房间已开启 | 发现电脑损坏，无法维修 | 0 | 否 | 是 |
| 电脑+狗 | 小房间已开启，狗已救出 | 标记电脑，效果未知 | 0 | 否 | 否 |
| 电脑+水潭 | 小房间已开启 | 电脑入水后出现河神，如实回答可生命值+1 | +1 | 否 | 是 |
| 电脑+行李箱 | 小房间已开启 | 被吐槽"打算出差"，建议就医检查 | 0 | 否 | 是 |
| 电脑+衣柜 | 小房间已开启 | 将电脑放入衣柜开机，无效果，被其他玩家嘲笑 | 0 | 否 | 是 |
| 电脑+木盒 | 小房间已开启，已获得木盒 | 无效果 | 0 | 否 | 否 |
| 电脑+钥匙 | 小房间已开启，已获得钥匙 | 钥匙插入电脑后无效果 | 0 | 否 | 否 |
| 电脑+囚笼 | 狗在囚笼 | 将电脑给狗玩，狗陷入沉思 | 0 | 否 | 是 |
| 电脑+囚笼 | 狗已救出 | 将电脑关入囚笼，命名为"赛博监狱" | 0 | 否 | 是 |
| 电脑+花瓶 | 小房间已开启，未收集全部字母 | 用花瓶砸电脑，花瓶碎裂、手划伤，获得字母"O" | -1 | 【关键】 | 是 |
| 电脑+花瓶 | 小房间已开启，已收集全部字母 | 砸电脑，获得字母"O"，同时获得"跳关卡卡" | 0 | 否 | 是 |

#### 2.5.6 钥匙相关组合

| 组合 | 前置条件 | 效果 | 生命值变化 | 是否关键 | 一次性 |
|------|----------|------|------------|----------|---------|
| 钥匙+狗 | 已获得钥匙，狗已救出 | 将钥匙含在嘴里（个人习惯） | 0 | 否 | 否 |
| 钥匙+猫 | 已获得钥匙，猫已救出 | 用钥匙挠后背，体感舒适 | 0 | 否 | 否 |
| 钥匙+龟 | 已获得钥匙 | 认为钥匙用于打开"桌扇门" | 0 | 否 | 否 |
| 钥匙+水潭 | 已获得钥匙 | 用钥匙打水漂，被其他玩家背后吐槽"智力不健全" | 0 | 否 | 是 |
| 钥匙+行李箱 | 已获得钥匙 | 钥匙放回行李箱后消失（再触发时提醒） | 0 | 否 | 是 |
| 钥匙+衣柜 | 已获得钥匙 | 打开衣柜暗格，获得红水晶心，食用后生命值+1 | +1 | 否 | 可复用 |
| 钥匙+木盒 | 已获得钥匙和木盒 | 钥匙型号不匹配，无法打开木盒 | 0 | 否 | 否 |
| 钥匙+电脑 | 已获得钥匙，小房间已开启 | 钥匙插入电脑后无效果 | 0 | 否 | 否 |
| 钥匙+显示器 | 已获得钥匙和显示器 | 用钥匙砸显示器，显示器损坏（无法使用） | 0 | 否 | 是 |
| 钥匙+囚笼 | 已获得钥匙，狗在囚笼 | 打开囚笼，狗恢复行动 | 0 | 【关键】 | 是 |
| 钥匙+囚笼 | 已获得钥匙，狗已救出 | 将囚笼重新锁上 | 0 | 否 | 是 |
| 钥匙+花瓶 | 已获得钥匙，小房间已开启 | 试图用钥匙打开花瓶，被建议就医检查 | 0 | 否 | 是 |

#### 2.5.7 显示器相关组合

| 组合 | 前置条件 | 效果 | 生命值变化 | 是否关键 | 一次性 |
|------|----------|------|------------|----------|---------|
| 显示器+猫 | 已获得显示器，猫已救出 | 砸坏显示器，显示器消失（无法使用） | 0 | 否 | 是 |
| 显示器+狗 | 已获得显示器，狗已救出 | 发现显示器防水，性能优于当前电脑 | 0 | 否 | 否 |
| 显示器+龟 | 已获得显示器 | 通过显示器反光"臭美" | +1 | 否 | 是 |
| 显示器+水潭 | 已获得显示器 | 显示器被扔回水潭后消失 | 0 | 否 | 是 |
| 显示器+行李箱 | 已获得显示器 | 获得提醒"显示器+衣柜" | 0 | 否 | 是 |
| 显示器+衣柜 | 已获得显示器 | 组合被夸"天才"，触发"作者崇拜" | 0 | 否 | 是 |
| 显示器+木盒 | 已获得显示器和木盒 | 被木盒砸坏（无法使用） | 0 | 否 | 是 |
| 显示器+电脑 | 已获得显示器，小房间已开启 | 更换显示器后打开电脑，获得字母"H" | 0 | 【关键】 | 是 |
| 显示器+钥匙 | 已获得显示器和钥匙 | 用钥匙砸显示器，显示器损坏（无法使用） | 0 | 否 | 是 |
| 显示器+花瓶 | 已获得显示器，小房间已开启 | 获得提醒"显示器+衣柜" | 0 | 否 | 是 |

#### 2.5.8 花瓶相关组合

| 组合 | 前置条件 | 效果 | 生命值变化 | 是否关键 | 一次性 |
|------|----------|------|------------|----------|---------|
| 花瓶+猫 | 小房间已开启，猫已救出 | 把脑袋探进花瓶，观察到瓶内字母"O" | 0 | 【关键】 | 是 |
| 花瓶+狗 | 小房间已开启，狗已救出 | 标记花瓶，效果未知 | 0 | 否 | 否 |
| 花瓶+龟 | 小房间已开启 | 未发现花瓶玄机，让其他玩家尝试 | 0 | 否 | 否 |
| 花瓶+囚笼 | 狗在囚笼 | 将花瓶递给狗，狗将其弄坏 | 0 | 否 | 是 |
| 花瓶+囚笼 | 狗已救出 | 将花瓶关入囚笼，无效果（仅被其他玩家嘲笑） | 0 | 否 | 是 |

#### 2.5.9 角色互动组合

| 组合 | 前置条件 | 效果 | 生命值变化 | 是否关键 | 一次性 |
|------|----------|------|------------|----------|---------|
| 猫+囚笼 | 猫已救出，狗在囚笼 | 猫嘲笑被囚的狗，被狗怒骂 | 0 | 否 | 是 |
| 龟+囚笼 | 狗在囚笼 | 安慰狗，称会想办法救他 | 0 | 否 | 是 |
| 猫+囚笼 | 猫已救出，狗已救出 | 猫将自己关入囚笼，称"好玩"并让其他人救自己 | 0 | 否 | 是 |
| 龟+囚笼 | 狗已救出 | 检查囚笼下方，获得"跳关卡卡" | 0 | 否 | 是 |
| 狗+囚笼 | 狗已救出 | 标记囚笼，效果未知 | 0 | 否 | 否 |
| 猫+狗 | 猫和狗均已救出 | 猫嘲讽狗身材，二人打架，猫惨败 | 猫-1 | 否 | 是 |
| 猫+龟 | 猫已救出 | 猫嘲笑龟"长得奇怪"，龟未理会 | 0 | 否 | 是 |
| 狗+龟 | 狗已救出 | 狗感谢龟救自己，约定共同弄清处境 | 0 | 否 | 是 |
| 狗+猫 | 狗和猫均已救出 | 狗与猫互感"眼熟"，认为有特殊羁绊 | 0 | 否 | 是 |
| 龟+猫 | 猫已救出 | 龟督促猫行动，猫吐槽龟是"装货" | 0 | 否 | 是 |
| 龟+狗 | 狗已救出 | 龟教狗强身方法，狗学会后生命值+1 | 狗+1 | 否 | 是 |

### 2.6 通关判定逻辑

#### 2.6.1 通关必要条件

**通关条件检查表：**
```
├─ 条件1：角色1（猫）已被救出 ✓
├─ 条件2：角色2（狗）已被救出 ✓
├─ 条件3：已收集字母C ✓
├─ 条件4：已收集字母E ✓
├─ 条件5：已收集字母H ✓
├─ 条件6：已收集字母O ✓
└─ 条件7：输入正确密码ECHO ✓

IF 全部条件满足 THEN
    第一关通关
ELSE
    无法开门，需继续探索
```

#### 2.6.2 最短通关路径

**最优解（最少步骤）：**

1. 龟+行李箱 → 触发密码
2. 输入000 → 救出猫
3. 猫+行李箱 → 获得钥匙
4. 龟+衣柜 → 打开小房间
5. 钥匙+囚笼 → 救出狗
6. 龟+水潭 → 获得木盒
7. 狗+木盒 → 获得字母E
8. 猫+衣柜 → 获得字母C
9. 狗+水潭 → 获得显示器
10. 显示器+电脑 → 获得字母H
11. 猫+花瓶 → 获得字母O
12. 大门输入ECHO → 通关

**总计：12步关键操作**

**替代路径说明：**
- 字母O可通过"木盒+花瓶"或"电脑+花瓶"获得
- 步骤4-6的顺序可调整，但必须在救出猫之后

### 2.7 特殊机制说明

#### 2.7.1 道具消失机制

某些道具在特定组合后会永久消失：

**会消失的道具：**
- 钥匙：放回行李箱后消失（钥匙+行李箱）
- 显示器：扔回水潭后消失（显示器+水潭）
- 显示器：被砸坏后消失（显示器+猫/钥匙/木盒）
- 木盒：扔回水潭后消失（木盒+水潭）
- 花瓶：砸碎后消失（花瓶+电脑/木盒）

**消失后的提示：**

当玩家再次尝试使用已消失的道具时："你已经把[道具名]弄丢了/损坏了，无法再使用。"

**重要说明：**
- 如果玩家不小心弄丢了关键道具（如钥匙），系统应提供补救机制
- 建议在玩家尝试危险操作前给予警告提示

#### 2.7.2 可复用组合

部分组合可以多次触发：

**可复用组合：**
- 衣柜+钥匙：每次使用可获得红水晶心，生命值+1
- 所有"标记"类组合（狗的技能）：可反复使用，无实际效果
- 部分"无效果"组合：可反复尝试，系统重复相同描述

#### 2.7.3 生命值锁定机制

**第一关特殊保护：**
```
IF 玩家生命值 <= 0 THEN
    玩家生命值 = 1（强制锁定）
    显示提示："你感到身体虚弱，但似乎有某种力量支撑着你..."

角色不会真正死亡
可以继续行动
```

### 2.8 系统提示与引导

#### 2.8.1 新手引导文本

建议在关卡开始时显示：

**【系统提示】**
- 尝试输入"道具+道具"或"你的名字+道具"来探索
- 例如：水潭+<你的名字>、行李箱+衣柜
- 不用担心犯错，你可以无限尝试
- 注意听从环境中的声音线索...

#### 2.8.2 卡关提示系统

当玩家长时间无进展时，系统应给予渐进式提示：

**提示等级1（5分钟无进展）：**
"你们好像被困住了，试试探索不同的道具组合？"

**提示等级2（10分钟无进展）：**
"听...那个哭声好像来自行李箱和远处的房间..."

**提示等级3（15分钟无进展）：**
根据当前进度给予具体提示：
- 未救出猫："试试让<龟玩家名>靠近行李箱？"
- 未救出狗："衣柜后面好像有什么，而且你需要一把钥匙..."
- 未收集全部字母："你们已经救出了同伴，现在需要找到四个字母来开门"

### 2.9 开发检查清单

#### 2.9.1 核心功能

- [ ] 行李箱密码输入界面（支持3位数字）
- [ ] 行李箱密码按钮（固定在主界面）
- [ ] 大门密码输入界面（支持4位字母）
- [ ] 小房间开启动画/状态切换
- [ ] 道具获取系统（木盒、钥匙、显示器）
- [ ] 字母收集系统（C、E、H、O）
- [ ] 字母收集进度显示（X/4）
- [ ] 道具消失机制
- [ ] 可复用组合判定
- [ ] 生命值锁定机制（最低1点）

#### 2.9.2 事件系统

- [ ] 60+道具组合效果实现
- [ ] 一次性事件标记
- [ ] 前置条件检查（角色状态、道具状态）
- [ ] 线性流程控制（救猫→救狗→收集字母）
- [ ] 通关条件判定
- [ ] 过场动画/文本（通关后）

#### 2.9.3 UI/UX

- [ ] 道具状态显示（已获得/已消失/可用）
- [ ] 字母收集界面
- [ ] 小房间解锁视觉反馈
- [ ] 密码输入界面设计
- [ ] 新手引导文本
- [ ] 卡关提示系统
- [ ] 错误操作反馈

#### 2.9.4 数据持久化

- [ ] 角色状态保存（被困/自由）
- [ ] 道具获取状态保存
- [ ] 字母收集状态保存
- [ ] 已触发事件记录
- [ ] 生命值保存
- [ ] 小房间开启状态保存

---

## 文档版本信息

**版本：** v2.0 开发版

**章节：** 二、第一幕 - 第一关：密室

**更新日期：** 2025-10-27

**适用对象：** Claude Code开发

**文档状态：** 待审核