# =====================================================
# Railway生产环境配置模板
# =====================================================
# 复制此文件到Railway的环境变量设置中
# =====================================================

# 环境配置
NODE_ENV=production
PORT=3000
HOST=0.0.0.0

# =====================================================
# 数据库配置（Railway自动注入，无需手动设置）
# =====================================================
# DATABASE_URL=<Railway自动生成>
# PGHOST=<Railway自动生成>
# PGPORT=<Railway自动生成>
# PGUSER=<Railway自动生成>
# PGPASSWORD=<Railway自动生成>
# PGDATABASE=<Railway自动生成>

# 数据库别名（兼容代码，使用Railway变量引用）
DB_HOST=${{PGHOST}}
DB_PORT=${{PGPORT}}
DB_USER=${{PGUSER}}
DB_PASSWORD=${{PGPASSWORD}}
DB_NAME=${{PGDATABASE}}

# =====================================================
# Redis配置（Railway自动注入）
# =====================================================
# REDIS_URL=<Railway自动生成>

# Redis别名
REDIS_HOST=${{REDIS_URL}}
REDIS_PORT=6379
REDIS_PASSWORD=

# =====================================================
# JWT配置（⚠️ 必须手动设置强密钥）
# =====================================================
# 生成命令: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=请替换为生成的强密钥_至少32字符
JWT_REFRESH_SECRET=请替换为生成的强密钥_至少32字符
JWT_EXPIRE=24h
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=30d

# =====================================================
# CORS配置（⚠️ 替换为实际前端URL）
# =====================================================
# 如果前端也部署在Railway，URL格式：https://your-app-name.up.railway.app
CLIENT_URL=https://your-frontend-app.up.railway.app
ALLOWED_ORIGINS=https://your-frontend-app.up.railway.app,https://your-custom-domain.com

# =====================================================
# Socket.IO配置
# =====================================================
SOCKET_PING_TIMEOUT=60000
SOCKET_PING_INTERVAL=25000

# =====================================================
# 日志配置
# =====================================================
LOG_LEVEL=info
LOG_FILE=logs/app.log

# =====================================================
# 游戏房间配置
# =====================================================
ROOM_MAX_PLAYERS=3
ROOM_TIMEOUT=3600000
ROOM_IDLE_TIMEOUT=1800000

# =====================================================
# 限流配置
# =====================================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# =====================================================
# Railway特定配置
# =====================================================
# Railway会自动注入以下变量，无需手动设置：
# - RAILWAY_ENVIRONMENT (production/development)
# - RAILWAY_SERVICE_NAME
# - RAILWAY_DEPLOYMENT_ID
# - RAILWAY_GIT_COMMIT_SHA
# - RAILWAY_GIT_BRANCH

# =====================================================
# 可选：监控和分析
# =====================================================
# NEW_RELIC_LICENSE_KEY=your_license_key
# SENTRY_DSN=your_sentry_dsn
